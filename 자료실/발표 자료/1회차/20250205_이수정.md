# 1.1) 웹은 HTTP로 나타낸다
## 웹의 기본 동작 원리

웹은 기본적으로 클라이언트(사용자)와 서버 간의 상호작용을 통해 정보를 전달하는 시스템입니다. 이때, 웹의 주요 요소는 **URL (Uniform Resource Locator)**, **HTTP (Hypertext Transfer Protocol)**, 그리고 **HTML (Hypertext Markup Language)** 다.

### 1. 클라이언트 → 웹(도구) → URL → 서버

사용자는 웹 브라우저와 같은 도구를 통해 URL을 입력하고, 이를 서버로 전달하여 요청을 보냄.

### 2. 서버 → 리소스(HTML) → 웹(도구) → 클라이언트

서버는 요청에 대해 해당하는 리소스를 찾아(예: HTML 파일) 클라이언트에게 전달.

### 3. HTTP (HyperText Transfer Protocol)

이 모든 흐름은 **HTTP (HyperText Transfer Protocol)**라는 규약을 통해 관리됩니다. HTTP는 웹에서 클라이언트와 서버 간의 데이터 전송을 위한 규약으로, 주로 웹 페이지 요청과 응답을 처리하는 역할을 함.

#### HyperText

- **HyperText**는 텍스트에 다른 텍스트나 미디어를 연결할 수 있게 해주는 시스템을 의미. 
- **HTML**을 통해 텍스트에 링크, 이미지, 비디오 등의 다양한 미디어를 삽입할 수 있음.

---
# 1.2) HTTP는 이렇게 태어났고 성장했다.

## 주요 개념

- **HTTP** (HyperText Transfer Protocol): 웹에서 클라이언트와 서버 간에 데이터를 주고받는 표준 프로토콜이다. 사용자가 **URL**을 통해 요청한 리소스를 **HTML** 형식으로 서버가 응답하도록 관리함.
- **URL** (Uniform Resource Locator): 웹에서 리소스의 주소다. 클라이언트가 **HTTP**를 사용해 서버에 요청을 보내는 경로를 지정함.
- **HTML** (HyperText Markup Language): 서버에서 클라이언트로 전달되는 웹 페이지의 내용이다. **HTTP** 프로토콜을 통해 **URL**로 요청된 리소스는 대개 **HTML** 형식으로 제공함.
- **Web**: **HTTP** 프로토콜을 사용해 **URL**로 리소스를 요청하고, 그 리소스는 **HTML** 형식으로 웹 브라우저에 표시된다. 이 모든 과정이 웹을 구성함.

## 웹의 성장

- **HTML1.0**: 웹 페이지의 기본적인 구조를 정의하는 첫 번째 버전.
- **HTTPd**: 웹 서버 소프트웨어로, HTTP 요청을 처리하는 서버 프로그램.
- **넷스케이프, 인터넷 익스플로러**: 초기 웹 브라우저들로, 웹의 대중화에 기여한 주요 브라우저.
- **Apache 2.0, HTML2.0**: Apache는 가장 널리 사용되는 웹 서버 소프트웨어이며, HTML2.0은 웹 표준으로 자리 잡은 두 번째 버전.

## HTTP 버전별 발전

- **HTTP/0.9**: 웹에서 간단한 HTML 문서를 요청하는 최초의 HTTP 버전.
- **HTTP/1.0**: 여러 요청을 처리할 수 있도록 개선된 버전이며, 리소스를 요청할 때마다 새로운 연결을 생성함.
- **HTTP/1.1**: 지속적인 연결 유지 및 여러 요청을 한 연결에서 처리하는 방식으로 성능을 향상시킴.
- **HTTP/2.0**: 요청을 다중화하고 헤더 압축, 서버 푸시 등의 기능을 통해 성능을 더욱 향상시킴.
- **QUIC**: 구글에서 개발한 프로토콜로, HTTP/2의 성능을 개선하고 연결 설정 지연을 줄임.

[HTTP 프로토콜 자세히 보기](HTTP프로토콜 정보 스터디 후 링크 추가)

## 사용 방식

- **WEB**: 웹 페이지 및 웹 애플리케이션을 위한 데이터 전송을 담당.
- **REST API**: HTTP를 사용해 클라이언트와 서버 간에 데이터를 교환하는 아키텍처.
- **파일 전송**: FTP와 같은 프로토콜을 이용한 파일 전송을 수행.
- **스트리밍**: 실시간 데이터 전송을 위한 프로토콜이며, 예로 HTTP Live Streaming (HLS)이 있음.
- **IoT**: 인터넷에 연결된 장치들 간의 데이터 전송을 담당.
- **클라우드 서비스**: 클라우드 환경에서의 데이터 전송 및 요청 처리를 수행.
- **웹소켓 연결**: 지속적인 양방향 통신을 위한 프로토콜.

---
# 1.3) 네트워크의 기본은 TCP/IP

## 주요 개념

- **프로토콜**: 두 장치 간의 통신을 위한 규정된 규칙과 절차로, 서로 다른 시스템들이 원활하게 데이터 전송을 수행할 수 있도록 함.
- **TCP/IP 프로토콜**: 인터넷과 네트워크 상에서 데이터를 전송하는 규약을 정의하는 여러 프로토콜들의 집합. 여기에는 **IP** 프로토콜 외에도 다양한 전송 및 응용 계층 프로토콜들이 포함됨.

## 계층 구조 (OSI 7 Layer)

- **물리 계층**: 실제 데이터가 전송되는 물리적인 매체를 의미함. 예를 들어, 광케이블(10G), 랜선(100M) 등이 해당됨.
- **링크 계층**: 물리적 연결을 관리하는 계층으로, **NIC** (Network Interface Card)나 **MAC** 주소가 사용됨. **스위치**는 이 계층에서 동작함.
- **네트워크 계층**: 데이터가 여러 네트워크를 통과하여 목적지에 도달할 수 있도록 경로를 설정하는 계층. 대표적인 프로토콜로는 **IP**와 **ICMP** (Internet Control Message Protocol)가 있음.
- **전송 계층**: 데이터 전송을 관리하는 계층으로, **TCP**와 **UDP** 프로토콜이 사용됨.
  - **TCP**: 신뢰성 있는 전송을 보장하며, 데이터가 정확하게 전달되도록 함.
  - **UDP**: 빠르지만 신뢰성은 떨어지며, 패킷 손실이나 순서 보장 없이 데이터를 전송합니다. UDP는 실시간 통신이나 스트리밍에 유리함.
- **어플리케이션 계층**: 최종 사용자와의 인터페이스를 담당하며, **FTP**, **DNS**, **HTTP**, **SMTP** 등 다양한 프로토콜이 이 계층에서 동작함.

## 계층화의 이유

각 계층을 독립적으로 설계함으로써, 한 계층을 변경하거나 업그레이드해도 다른 계층에 영향을 미치지 않도록 할 수 있다.

---
# 1.4) HTTP와 관계가 깊은 프로토콜 IP/TCP/DNS

## IP 주소 및 네트워크 연결 설정

- **IP**: 인터넷 프로토콜은 데이터 전송을 위한 주소 체계를 정의함. 각 장치에 고유한 주소(IP 주소)를 할당하여 데이터를 목적지로 전달함.
- **MAC 주소**: 네트워크 상에서 각 장치를 고유하게 식별할 수 있는 하드웨어 주소다.
- **ARP**: 주소 해석 프로토콜(ARP)은 IP 주소를 MAC 주소로 변환하는 프로토콜이다. ARP는 네트워크 내에서 IP 주소와 MAC 주소를 연결하여 데이터 링크 계층에서 목적지 장치를 찾을 수 있도록 한다.
- **TCP**: TCP는 데이터를 세그먼트로 나누어 전송하며, 각 세그먼트가 순차적으로 도달하도록 보장한다. 이 과정에서 **쓰리핸드쉐이크**(Three-way Handshake)가 사용된다.
    - **쓰리핸드쉐이크**: TCP 연결을 설정하는 과정으로, 클라이언트와 서버 간에 세 번의 메시지를 주고받으며 연결을 설정한다. 첫 번째 메시지는 클라이언트가 서버에 연결을 요청하는 것이고, 두 번째 메시지는 서버가 클라이언트의 요청을 수락하는 응답을 보낸다. 세 번째 메시지는 클라이언트가 서버의 응답을 확인하는 메시지다.

---
## 연결 시나리오

### 1. 도메인 이름 해석 (DNS)

사용자가 웹사이트에 접속하려고 할 때, 예를 들어 http://www.example.com과 같은 URL을 입력한다. 이 URL에서 www.example.com이라는 도메인 이름을 **DNS** (Domain Name System) 서버에 요청하여 해당 도메인에 매핑된 **IP 주소**를 얻는다. 예를 들어, DNS는 www.example.com에 대해 "192.168.1.1"과 같은 IP 주소를 반환한다.

*참고: DNS 해석은 **초기** 단계에서 이루어지며, 실제 연결 전 IP 주소를 알아야 하므로 DNS 요청이 먼저 발생한다.*

#### 1.1 DNS 설명

**DNS**는 **도메인 이름 시스템**으로, 도메인 이름을 **IP 주소**로 변환하는 시스템이다. 사람이 이해할 수 있는 도메인 이름을 컴퓨터가 이해할 수 있는 **IP 주소**로 바꾸어 인터넷 상에서 통신을 가능하게 한다.

#### 1.2 DNS의 역할

- **도메인 이름을 IP 주소로 변환**: 웹사이트 주소를 입력하면 이를 IP 주소로 변환하여 해당 서버에 연결한다.
- **도메인 이름 서버**: DNS는 여러 단계의 서버로 구성되어 있으며, 각 서버는 도메인 이름을 IP 주소로 변환하는 역할을 한다.
  - **루트 DNS 서버**: 최상위 서버로, 최상위 도메인(TLD) 서버의 위치를 알려준다.
  - **TLD DNS 서버**: `.com`, `.org` 등의 도메인에 대한 정보를 제공한다.
  - **권한 있는 네임서버**: 특정 도메인에 대한 최종적인 IP 주소를 제공한다.
  - **캐시된 DNS 서버**: 이전에 요청한 도메인의 정보를 저장하여, 빠르게 IP 주소를 반환한다.

#### 1.3 DNS 흐름

1. 사용자가 웹사이트 URL을 입력하면, **DNS 서버**가 이를 처리한다.
2. **캐시된 DNS 서버**에서 먼저 확인한다. 이 서버는 이미 저장된 IP 주소가 있다면 이를 즉시 반환한다.
3. 만약 캐시에 해당 정보가 없다면, **루트 DNS 서버**로부터 시작해, **TLD 서버**, **권한 있는 네임서버**를 순차적으로 조회하여 최종적으로 **IP 주소**를 반환한다.
4. 결과적으로 IP 주소를 받은 사용자는 웹사이트에 접속하게 된다.

#### 1.4 ISP

**ISP**는 **인터넷 서비스 제공자**로, 인터넷에 연결할 수 있는 회선과 서비스, IP 주소를 제공하는 회사이다. ISP는 사용자가 인터넷에 접속할 수 있도록 돕고, 웹사이트 요청 시 DNS 서버를 운영하여 도메인 이름을 IP 주소로 변환해주는 서비스도 제공한다.

##### 1.4.1 ISP의 역할

- **인터넷 접속 제공**: ISP는 사용자에게 **인터넷 접속**을 위한 회선(예: 광대역, 5G 등)을 제공한다.
- **IP 주소 할당**: 인터넷 접속을 위해 고유한 **IP 주소**를 할당한다.
- **DNS 서버 제공**: 대부분의 ISP는 **DNS 서버**를 운영하여 도메인 이름을 IP 주소로 변환하는 서비스를 제공한다.

*한국 KT, SKT, U+는 2티어(**Tier 1 ISP**와의 계약을 통해 **글로벌 인터넷 연결**을 제공)*

**AT&T**, **Verizon** 같은 자체적 글로벌 네트워크를 소유한 경우는 1티어 ISP이다.


### 2. IP 주소를 통한 연결 준비

DNS를 통해 IP 주소를 얻은 후, 클라이언트는 해당 IP 주소로 패킷을 전송해야 한다. 하지만 네트워크 상에서 데이터를 전송하려면 **MAC 주소**가 필요하다. 이때, 클라이언트는 **ARP**(Address Resolution Protocol) 요청을 보낸다. ARP는 해당 IP 주소에 대응하는 MAC 주소를 찾아 로컬 네트워크에서 사용될 수 있게 한다.

*ARP는 실제 **데이터 링크 계층**에서 필요한 MAC 주소를 얻는 과정이다. 이는 IP 주소가 아닌 MAC 주소로 데이터를 전송해야 하므로 필수적이다.*

#### 2.1 ARP 설명

**ARP**는 **IP 주소**에 대응하는 **MAC 주소**를 찾기 위한 프로토콜이다. 이 과정에서 ARP는 **브로드캐스트** 방식으로 요청을 보내고, 응답을 받은 후 **ARP 테이블**에 그 정보를 저장한다.

#### 2.2 ARP 흐름

1. **ARP 요청** (브로드캐스트):
   - 클라이언트가 **다른 장치**와 통신하려면 **IP 주소**를 **MAC 주소**로 변환해야 한다.
   - 클라이언트가 특정 IP 주소로 패킷을 보내기 전에 **ARP 요청**을 **브로드캐스트**로 네트워크에 보낸다. 이 요청에는 "이 IP 주소의 MAC 주소가 무엇인가요?"라는 내용이 담겨 있다.
   - **ARP 요청**은 네트워크에 있는 모든 장치들에게 전달되며, **특정 IP를 가진 장치만 응답**하게 된다.
2. **ARP 응답**:
   - 해당 IP 주소를 가진 장치는 **ARP 응답**을 보내며 자신의 **MAC 주소**를 알려준다. 이 응답은 **유니캐스트**로, 요청한 장치에게만 전달된다.
3. **ARP 테이블 저장**:
   - 클라이언트는 받은 **MAC 주소**를 **ARP 테이블**에 저장한다. ARP 테이블에는 **IP 주소**와 해당하는 **MAC 주소**가 매핑된 정보가 저장된다.
   - 이후 이 정보는 일정 시간 동안 **캐시**로 저장되어, 동일한 IP로 다시 패킷을 보내는 경우 브로드캐스트 없이 바로 MAC 주소를 확인할 수 있다.
4. **ARP 테이블 갱신**:
   - ARP 테이블은 일정 시간이 지나면 **유효 기간이 만료**되어 삭제된다. 그러면 다시 ARP 요청을 보내는 과정이 필요해진다.

### 3. TCP 연결 설정 (쓰리핸드쉐이크)

이제 IP 주소와 MAC 주소가 준비된 클라이언트는 **TCP 연결**을 설정해야 한다. 이를 위해 **쓰리핸드쉐이크** (Three-way Handshake) 과정을 진행한다.

- **Step 1: SYN** (클라이언트 → 서버): 클라이언트는 서버에 연결을 요청하는 **SYN**(Synchronize) 패킷을 보낸다. 이 패킷에는 클라이언트의 초기 순서 번호가 포함된다.
- **Step 2: SYN-ACK** (서버 → 클라이언트): 서버는 클라이언트의 연결 요청을 받아들이고, **SYN-ACK** 패킷을 반환한다. 이 패킷에는 서버의 초기 순서 번호와 클라이언트의 요청에 대한 응답이 포함된다.
- **Step 3: ACK** (클라이언트 → 서버): 클라이언트는 서버의 응답을 확인한 후, **ACK**(Acknowledgment) 패킷을 서버에 보내며 연결이 설정된다.


### 4. HTTP 요청 (클라이언트 → 서버)

TCP 연결이 완료되면, 클라이언트는 **HTTP** 프로토콜을 사용하여 웹 서버에 리소스를 요청한다. 예를 들어, 클라이언트가 웹 페이지의 HTML, CSS, JavaScript 파일을 요청하는 **HTTP GET** 요청을 보낸다. 이 요청에는 요청한 리소스의 경로와 클라이언트 정보 등이 포함된다.


### 5. HTTP 응답 (서버 → 클라이언트)

서버는 클라이언트의 요청을 처리하고, 요청한 웹 페이지 리소스를 HTTP 응답으로 반환한다. 이 응답은 다음과 같은 형태로 전달된다:

- **헤더(Header)**: HTTP 상태 코드(예: `200 OK`), 응답에 대한 추가 정보(예: 콘텐츠 유형, 길이 등)가 포함된다.
- **본문(Body)**: 요청한 리소스인 HTML, CSS, JavaScript 등의 내용이 포함된다. 클라이언트는 이 데이터를 수신하여 웹 페이지를 표시하게 된다.


### 6. 웹 페이지 렌더링

클라이언트는 서버에서 받은 HTML을 처리하고, HTML 내에서 참조된 CSS, JavaScript 파일들을 추가로 요청하여 웹 페이지를 렌더링한다. CSS는 스타일을 적용하고, JavaScript는 동적인 기능을 담당한다.
