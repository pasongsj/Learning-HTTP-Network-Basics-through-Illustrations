## 제5장 HTTP와 연계하는 웹 서버

### 5.1 1대로 멀티 도메인을 가능하게 하는 가상 호스트

**가상 호스트(Virtual Host)**

| 일반적인 웹서버 (서버 3대) | 가상호스트 웹서버 (서버 1대) |
| --- | --- |
| [aaa.com](http://aaa.com/) (IP : 111.111.111.111) | [aaa.com](http://aaa.com/) (IP : 111.111.111.111) |
| [bbb.com](http://bbb.com/) (IP : 222.222.222.222) | [bbb.com](http://bbb.com/) (IP : 111.111.111.111) |
| [ccc.com](http://ccc.com/) (IP : 333.333.333.333) | [ccc.com](http://ccc.com/) (IP : 111.111.111.111) |
- 하나의 서버에서 여러 웹사이트(웹, 메일 등)를 호스팅할 수 있도록 해주는 기술
- 같은 서버의 같은 IP 주소에서 두 개의 다른 도메인 웹사이트가 실행될 때 주의해야 할 점
    1. 호스트 헤더(Host Header)
        1. 요청을 보낼 때 정확한 Host 헤더를 설정해야 한다.
        2. 서버가 요청을 처리할 웹사이트를 결정하는 데 사용된다.
        3. ex Host: [www.example.com](http://www.example.com/)
    2. 도메인과 경로 정확성
        1. 요청 URL에 도메인과 경로를 정확히 입력해야 서버가 올바른 리소스를 찾아서 반환할 수 있다.
        2. ex http://www.example.com/path/to/resource

### 5.2 통신을 중계하는 프로그램 : 프록시, 게이트웨이, 터널

**프록시(proxy)**

- 클라이언트와 서버 사이에서 중개 역할을 하여, 요청과 응답을 전달하거나 필터링하는 서버
- 오리진 서버(Origin Server)
    - 웹 콘텐츠의 원본 데이터를 저장하고 제공하는 서버
- Via 헤더 필드
    - HTTP 요청이나 응답이 거쳐온 중간 서버(프록시, 게이트웨이 등)의 정보를 표시
    - 네트워크 상에서 요청이나 응답의 경로를 추적하거나, 중간 서버를 디버깅하는 데 유용
    - ex 프록시 서버를 거쳐서 요청이 전달되면 `Via: 1.1 example-proxy`와 같은 형태로 표시
- 캐싱 프록시(Cashing Proxy)
    - 자주 요청되는 웹 콘텐츠를 저장하여, 후속 요청에 대해 빠르게 응답하고 서버 부하를 줄이는 프록시 서버
- 투명 프록시(Transparent Proxy)
    - 요청이나 응답의 본문이나 헤더를 변경하지 않으며, 단지 중간에서 데이터를 전달하는 역할
    - 메시지 내용을 변경하지 않고, 클라이언트와 서버 간의 통신을 중계
    - 사용자가 이를 인식하지 못하도록 동작하는 프록시
        - 네트워크에서 투명하게 동작하기 때문에 사용자는 자신이 프록시를 통해 인터넷을 사용하고 있다는 사실을 알지 못한다.
- 비투과 프록시(Non-transparent Proxy)
    - 클라이언트의 요청을 전달할 때 헤더를 추가하거나, 응답 데이터를 수정할 수 있다.
    - 클라이언트 인식 가능
        - 프록시 서버의 IP가 클라이언트의 요청 헤더에 나타날 수 있어서, 프록시를 거쳐서 요청이 전달되고 있음을 알 수 있다.

**게이트웨이(gateway)**

- 서로 다른 네트워크 간의 데이터 전송을 가능하게 해주는 장치로, 네트워크 간의 연결을 중개하고 **프로토콜 변환**을 수행하는 역할

**터널(tunnel)**

- 두 네트워크 간에 데이터를 안전하게 전달하기 위해 암호화된 연결을 만들어, 외부에서 직접 볼 수 없도록 하는 기술
- 데이터 캡슐화
    - 네트워크 트래픽을 **캡슐화**하여, 원본 데이터가 다른 네트워크를 거쳐도 그 내용이 외부에서 노출되지 않도록 한다.
- 암호화
    - 암호화된 데이터를 전송하므로, 중간에 데이터를 가로채더라도 내용은 알 수 없다.

**캐시(cache)**

- 자주 사용되는 데이터를 임시로 저장하여, 이후에 더 빠르게 접근할 수 있도록 하는 저장소
- 유효성
    - 캐시된 데이터가 여전히 유효한지, 즉 최신 상태인지 확인하는 과정
    - 캐시된 데이터는 시간이 지나면서 변경되거나 업데이트될 수 있기 때문에, 그 데이터가 여전히 최신 상태인지 확인하는 것이 중요하다.
